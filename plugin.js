!function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var e=function(){function e(){var t,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=void 0,(n="observers")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,this.observers={}}var n,o,r;return n=e,(o=[{key:"emit",value:function(t,e){return!!Array.isArray(this.observers[t])&&(this.observers[t].forEach((function(t){t(e)})),!0)}},{key:"subscribe",value:function(t,e){this.observers[t]=this.observers[t]||[],this.observers[t].push(e)}},{key:"unsubscribe",value:function(t,e){return this.observers[t]=this.observers[t].filter((function(t){return t!==e})),this.observers}}])&&t(n.prototype,o),r&&t(n,r),e}(),n={min:0,max:100,step:25,valueFrom:50,valueTo:75,orientation:"horizontal",range:!1,fill:!0,labels:!0,tooltips:!0,color:"orange"};function o(t,e){var n=t.min,o=void 0===n?0:n,r=t.max,i=void 0===r?0:r,a=t.step,c=void 0===a?1:a,u=(e-o)/c*(100/((i-o)/c));return u>100&&(u=100),u<0&&(u=0),u}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=(e-t)/n,i=100/r,a=Math.round(o/i)*n,c=a+t;return c}function i(t){var e=t.getBoundingClientRect().left,n=t.getBoundingClientRect().top,o=t.getBoundingClientRect().right,r=t.getBoundingClientRect().bottom;return{left:e+window.pageXOffset,bottom:r+window.pageYOffset,width:o-e,height:r-n}}function a(t){return{pageX:t.pageX,pageY:t.pageY}}function c(t,e,n){var o="horizontal"===t,r=n.pageX,i=void 0===r?0:r,a=n.pageY,c=void 0===a?0:a,u=e.left,s=void 0===u?0:u,l=e.bottom,f=void 0===l?0:l,p=e.width,h=void 0===p?0:p,v=e.height;return o?(i-s)/h*100:(f-c)/(void 0===v?0:v)*100}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"min",void 0),f(this,"max",void 0),f(this,"step",void 0),f(this,"valueFrom",void 0),f(this,"valueTo",void 0)}var e,n,i;return e=t,(n=[{key:"checkState",value:function(t){return this.min=t.min||0,this.max=t.max||0,this.step=t.step||1,this.valueFrom=t.valueFrom||0,this.valueTo=t.valueTo||0,this.checkMinMax(this.min,this.max),this.step=this.checkStep(this.max,this.step),t.range&&(this.checkMinRange(this.valueFrom),this.checkMaxRange(this.valueTo),this.checkRangeMinMax(this.valueFrom,this.valueTo)),s(s({},t),{},{min:this.min,max:this.max,step:this.step,valueFrom:this.checkValue(this.valueFrom),valueTo:this.valueTo})}},{key:"checkValue",value:function(t){var e=o({min:this.min,max:this.max,step:this.step},t),n=r(this.min,this.max,this.step,e);return e>=100&&n!==this.max&&(n=this.max),n>this.max&&(n=this.max),n}},{key:"checkMinRange",value:function(t){return t>=this.valueTo&&(t=this.valueTo),this.checkValue(t)}},{key:"checkMaxRange",value:function(t){return t<=this.valueFrom&&(t=this.valueFrom),this.checkValue(t)}},{key:"checkStep",value:function(t,e){var n=e;return e<=0&&(n=1),e>t&&(n=t),n}},{key:"checkMinMax",value:function(t,e){var n=0;t>=e&&(n=t,t=e,e=n),this.min=t,this.max=e}},{key:"checkRangeMinMax",value:function(t,e){var n=0;t>=e&&(n=t,t=e,e=n),t<=this.min&&(t=this.min),e>=this.max&&(e=this.max),this.valueFrom=this.checkValue(t),this.valueTo=this.checkValue(e)}}])&&l(e.prototype,n),i&&l(e,i),t}();function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){j(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=O(t);if(e){var r=O(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return g(this,n)}}function g(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?w(t):e}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(a,t);var e,o,r,i=m(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),j(w(t=i.call(this)),"state",n),j(w(t),"validation",void 0),t.validation=new p,t}return e=a,(o=[{key:"setState",value:function(t){var e=y(y({},this.state),t);this.state=this.validation.checkState(e),this.emit("stateChanged",this.state)}},{key:"getState",value:function(){return this.state}},{key:"getValue",value:function(t){return this.state[t]}},{key:"setValue",value:function(t,e){this.checkStateValue(t,e),this.state=this.validation.checkState(this.state),this.isValue(t)?this.emit("valueChanged",this.state):this.emit("stateChanged",this.state)}},{key:"checkStateValue",value:function(t,e){var n,o=this.state.range,r="valueFrom"===t,i="valueTo"===t;n="valueFrom"===t&&o?this.validation.checkMinRange(e):r?this.validation.checkValue(e):i?this.validation.checkMaxRange(e):e,this.state[t]=n}},{key:"isValue",value:function(t){return"valueFrom"===t||"valueTo"===t}}])&&b(e.prototype,o),r&&b(e,r),a}(e);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function S(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=L(t);if(e){var r=L(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return R(this,n)}}function R(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?x(t):e}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(i,t);var e,n,o,r=T(i);function i(t,e){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),D(x(n=r.call(this)),"state",void 0),D(x(n),"root",void 0),(this instanceof i?this.constructor:void 0)===i)throw new Error("Can`t instantiate SliderComponent, only concrete one");return n.root=e,n.state=t||{},n}return e=i,(n=[{key:"update",value:function(t){this.state=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t)}}])&&S(e.prototype,n),o&&S(e,o),i}(e);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=q(t);if(e){var r=q(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return A(this,n)}}function A(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?z(t):e}function z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(Scale,t);var e,n,o,u=B(Scale);function Scale(){var t;M(this,Scale);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return H(z(t=u.call.apply(u,[this].concat(n))),"scaleNode",void 0),t}return e=Scale,(n=[{key:"display",value:function(){this.root.innerHTML="",this.root.insertAdjacentHTML("afterbegin",this.getTemplate()),this.scaleNode=this.root.querySelector('[data-id="scale"]'),this.onPointerDown=this.onPointerDown.bind(this),this.scaleNode.addEventListener("pointerdown",this.onPointerDown)}},{key:"onPointerDown",value:function(t){if(this.isTarget(t)){var e=this.state,n=e.min,o=void 0===n?0:n,u=e.max,s=void 0===u?100:u,l=e.valueFrom,f=void 0===l?0:l,p=e.valueTo,h=void 0===p?0:p,v=e.step,y=void 0===v?1:v,b=e.orientation,d=void 0===b?"horizontal":b,m=e.range,g=void 0!==m&&m,w=r(o,s,y,c(d,i(this.scaleNode),a(t)));g&&w>=f+(h-f)/2?(this.emit("scale:valueTo",w.toFixed()),this.emit("scale:targetMax",t)):(this.emit("scale:valueFrom",w.toFixed()),this.emit("scale:target",t))}}},{key:"isTarget",value:function(t){if(t.target instanceof HTMLElement)return"scale"===t.target.dataset.id||"fill"===t.target.dataset.id}},{key:"getTemplate",value:function(){var t=this.state.orientation,e=void 0===t?"horizontal":t;return'\n      <div class="slider slider_'.concat(e,'">\n        <div class="slider__scale slider__scale_').concat(e,'" data-id="scale"></div>\n      </div>\n    ')}}])&&V(e.prototype,n),o&&V(e,o),Scale}(C);function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function G(t,e){return(G=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Q(t);if(e){var r=Q(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return J(this,n)}}function J(t,e){return!e||"object"!==X(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&G(t,e)}(a,t);var e,n,r,i=I(a);function a(){return Y(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"display",value:function(){var t=this.root.querySelector('[data-id="scale"]');if(!t)throw new Error("Scale element is not found");if(this.state.fill)return t.insertAdjacentHTML("afterbegin",this.getTemplate())}},{key:"update",value:function(t){var e=this.root.querySelector('[data-id="fill"]'),n=t.orientation,r=void 0===n?"horizontal":n,i=t.range,a=void 0!==i&&i,c=t.valueTo,u=void 0===c?100:c,s=t.valueFrom,l=void 0===s?0:s,f="horizontal"===r,p=f?"width":"height",h=f?"left":"bottom";l=o(t,l),e&&a?(u=o(t,u),e.style[p]="".concat(u-l,"%"),e.style[h]="".concat(l,"%")):e&&(e.style[p]="".concat(l,"%"))}},{key:"getTemplate",value:function(){var t=this.state,e=t.color,n=void 0===e?"orange":e,o=t.orientation;return'\n      <div class="slider__fill slider__fill_'.concat(void 0===o?"horizontal":o," slider__fill_").concat(n,' "data-id="fill"></div>\n    ')}}])&&U(e.prototype,n),r&&U(e,r),a}(C);function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ot(t,e){return(ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=ct(t);if(e){var r=ct(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return it(this,n)}}function it(t,e){return!e||"object"!==Z(e)&&"function"!=typeof e?at(t):e}function at(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ot(t,e)}(Knob,t);var e,n,u,s=rt(Knob);function Knob(){var t;et(this,Knob);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return ut(at(t=s.call.apply(s,[this].concat(n))),"scale",void 0),ut(at(t),"knob",void 0),t}return e=Knob,(n=[{key:"display",value:function(){if(this.scale=this.root.querySelector('[data-id="scale"]'),!this.scale)throw new Error("Scale element is not found");this.scale.insertAdjacentHTML("beforeend",this.getTemplate()),this.knob=this.root.querySelector('[data-id="knob"]'),this.addEventListeners()}},{key:"update",value:function(t){this.state=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach((function(e){ut(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t);var e=this.state.orientation;if(this.knob){var n="horizontal"===e?"left":"bottom",r=t.valueFrom,i=void 0===r?0:r;this.knob.style[n]="".concat(o(t,i),"%")}}},{key:"onPointerDown",value:function(t){var e=this,n=this.state,o=n.min,u=void 0===o?0:o,s=n.max,l=void 0===s?100:s,f=n.step,p=void 0===f?1:f,h=n.orientation,v=void 0===h?"horizontal":h;document.onpointermove=function(t){t.preventDefault(),e.knob.ondragstart=function(){return!1};var n=i(e.scale),o=a(t),s=c(v,n,o),f=r(u,l,p,s);e.emit("changeValue",f.toFixed())},document.onpointerup=function(){document.onpointermove=null,document.onpointerup=null}}},{key:"onKeyDown",value:function(t){var e=this.state,n=e.valueFrom,o=void 0===n?0:n,r=e.step,i=void 0===r?1:r,a=t.code,c=0;"ArrowRight"!==a&&"ArrowUp"!==a||(c=o+i,this.emit("changeValue",c)),"ArrowLeft"!==a&&"ArrowDown"!==a||(c=o-i,this.emit("changeValue",c))}},{key:"addEventListeners",value:function(){this.onPointerDown=this.onPointerDown.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.knob.addEventListener("pointerdown",this.onPointerDown),this.knob.addEventListener("keydown",this.onKeyDown)}},{key:"getTemplate",value:function(){var t=this.state,e=t.orientation,n=void 0===e?"horizontal":e,o=t.color,r=void 0===o?"orange":o;return'\n      <div class="slider__knob slider__knob_'.concat(n," slider__knob_").concat(r,'" \n        data-id="knob" role="slider" tabindex="0"></div>\n    ')}}])&&nt(e.prototype,n),u&&nt(e,u),Knob}(C);function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ht(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function vt(t,e){return(vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=mt(t);if(e){var r=mt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return bt(this,n)}}function bt(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?dt(t):e}function dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vt(t,e)}(SecondKnob,t);var e,n,u,s=yt(SecondKnob);function SecondKnob(){var t;pt(this,SecondKnob);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return gt(dt(t=s.call.apply(s,[this].concat(n))),"scale",void 0),gt(dt(t),"secondKnob",void 0),t}return e=SecondKnob,(n=[{key:"display",value:function(){if(this.scale=this.root.querySelector('[data-id="scale"]'),!this.scale)throw new Error("Scale element is not found");this.scale.insertAdjacentHTML("beforeend",this.getTemplate()),this.secondKnob=this.root.querySelector('[data-knob="second"]'),this.addEventListeners()}},{key:"update",value:function(t){this.state=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(n),!0).forEach((function(e){gt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t);var e=this.state.orientation,n=void 0===e?"horizontal":e;if(this.secondKnob){var r="horizontal"===n?"left":"bottom",i=t.valueTo,a=void 0===i?0:i;this.secondKnob.style[r]="".concat(o(t,a),"%")}}},{key:"onPointerDown",value:function(t){var e=this,n=this.state,o=n.min,u=void 0===o?0:o,s=n.max,l=void 0===s?100:s,f=n.step,p=void 0===f?1:f,h=n.orientation,v=void 0===h?"horizontal":h;document.onpointermove=function(t){t.preventDefault(),e.secondKnob.ondragstart=function(){return!1};var n=i(e.scale),o=a(t),s=c(v,n,o),f=r(u,l,p,s);e.emit("changeValue",f.toFixed())},document.onmouseup=function(){document.onpointermove=null,document.onmouseup=null}}},{key:"onKeyDown",value:function(t){var e=this.state,n=e.valueTo,o=void 0===n?0:n,r=e.step,i=void 0===r?1:r,a=t.code,c=0;"ArrowRight"!==a&&"ArrowUp"!==a||(c=o+i,this.emit("changeValue",c)),"ArrowLeft"!==a&&"ArrowDown"!==a||(c=o-i,this.emit("changeValue",c))}},{key:"addEventListeners",value:function(){this.onPointerDown=this.onPointerDown.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.secondKnob.addEventListener("pointerdown",this.onPointerDown),this.secondKnob.addEventListener("keydown",this.onKeyDown)}},{key:"getTemplate",value:function(){var t=this.state,e=t.orientation,n=void 0===e?"horizontal":e,o=t.color,r=void 0===o?"orange":o;return'\n      <div class="slider__knob slider__knob_'.concat(n," slider__knob_").concat(r,'" \n      data-knob="second" role="slider" tabindex="0"></div>\n    ')}}])&&ht(e.prototype,n),u&&ht(e,u),SecondKnob}(C);function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Pt(t,e,n){return e&&_t(t.prototype,e),n&&_t(t,n),t}function kt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Rt(t);if(e){var r=Rt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Tt(this,n)}}function Tt(t,e){return!e||"object"!==Ot(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xt=function(t){kt(n,t);var e=Et(n);function n(){return jt(this,n),e.apply(this,arguments)}return Pt(n,[{key:"display",value:function(){var t=this.state.tooltips;if(void 0!==t&&t){var e=this.root.querySelector('[data-id="knob"]');if(!e)throw new Error("Knob element is not found");e.insertAdjacentHTML("afterbegin",this.getTemplate())}}},{key:"update",value:function(t){var e=this.root.querySelector('[data-id="tooltip-value"]');e&&(e.innerText="".concat(t.valueFrom))}},{key:"getTemplate",value:function(){var t=this.state,e=t.orientation,n=void 0===e?"horizontal":e,o=t.color,r=void 0===o?"orange":o,i="vertical"===n?"slider__tooltip_arrow_vertical":"";return'\n      <div class="slider__tooltip slider__tooltip_'.concat(n," slider__tooltip_").concat(r,'">\n        <span class="tooltip__value" data-id="tooltip-value"></span>\n        <div class="slider__tooltip_arrow ').concat(i,'"></div>\n      </div>\n    ')}}]),n}(C),Lt=function(t){kt(n,t);var e=Et(n);function n(){return jt(this,n),e.apply(this,arguments)}return Pt(n,[{key:"display",value:function(){var t=this.state.tooltips;if(void 0!==t&&t){var e=this.root.querySelector('[data-knob="second"]');if(!e)throw new Error("Second knob element is not found");e.insertAdjacentHTML("afterbegin",this.getTemplate())}}},{key:"update",value:function(t){var e=this.root.querySelector('[data-id="tooltip-value-second"]');e&&(e.innerText="".concat(t.valueTo))}},{key:"getTemplate",value:function(){var t=this.state,e=t.orientation,n=void 0===e?"horizontal":e,o=t.color,r=void 0===o?"orange":o,i="vertical"===n?"slider__tooltip_arrow_vertical":"";return'\n      <div class="slider__tooltip slider__tooltip_'.concat(n," slider__tooltip_").concat(r,'" data-tooltip="second">\n        <span class="tooltip__value" data-id="tooltip-value-second"></span>\n        <div class="slider__tooltip_arrow ').concat(i,'"></div>\n      </div>\n    ')}}]),n}(C);function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ft(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Mt(t,e){return(Mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Bt(t);if(e){var r=Bt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Kt(this,n)}}function Kt(t,e){return!e||"object"!==Dt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bt(t){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var At=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mt(t,e)}(Labels,t);var e,n,i,a=Vt(Labels);function Labels(){return Ct(this,Labels),a.apply(this,arguments)}return e=Labels,(n=[{key:"display",value:function(){var t=this.root.querySelector('[data-id="scale"]');if(!t)throw new Error("Scale element is not found");if(this.state.labels){t.insertAdjacentHTML("beforeend",this.getTemplate());var e=this.root.querySelector('[data-id="labels"]');this.onPointerDown=this.onPointerDown.bind(this),e.addEventListener("pointerdown",this.onPointerDown)}}},{key:"onPointerDown",value:function(t){if(t.target instanceof HTMLElement){var e=this.state,n=e.min,o=e.max,i=void 0===o?0:o,a=e.step,c=void 0===a?1:a,u=e.valueFrom,s=void 0===u?0:u,l=e.valueTo,f=void 0===l?0:l,p=e.range,h=void 0!==p&&p,v=Number(t.target.dataset.value),y=r(n,i,c,v);100===v&&(y=i),h&&y>=s+(f-s)/2?this.emit("labels:valueTo",y):this.emit("labels:valueFrom",y)}}},{key:"getTemplate",value:function(){var t=this.state.orientation;return'\n      <div class="slider__labels slider__labels_'.concat(void 0===t?"horizontal":t,'" data-id="labels">\n        ').concat(this.getLabels(),"\n      </div>\n    ")}},{key:"getLabels",value:function(){var t=this,e=this.state,n=e.min,o=void 0===n?0:n,i=e.max,a=void 0===i?0:i,c=e.step,u=void 0===c?1:c,s=[],l=[20,40,60,80];return(l=l.map((function(t){return r(o,a,u,t)})).concat(o,a).sort((function(t,e){return t-e}))).forEach((function(e){s.push(t.createLabel(e))})),s.join("")}},{key:"createLabel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.state.orientation,n="horizontal"===e?"left":"bottom",r=o(this.state,t).toFixed(2),i='\n      <div class="slider__labels-item" \n      style="'.concat(n,": ").concat(r,'%;"\n      data-value=').concat(r,">\n        ").concat(t,"\n      </div>\n    ");return i}}])&&Ft(e.prototype,n),i&&Ft(e,i),Labels}(C);function zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ht(t,e,n){return e&&qt(t.prototype,e),n&&qt(t,n),t}var Nt,$t,Xt,Yt=function(){function t(){zt(this,t)}return Ht(t,[{key:"createComponents",value:function(t,e){var n=[];return[N,W,st,At,xt].forEach((function(o){var r=new o(t,e);n.push(r)})),n}}]),t}(),Ut=function(){function t(){zt(this,t)}return Ht(t,[{key:"createComponents",value:function(t,e){var n=[];return[N,W,st,wt,xt,Lt,At].forEach((function(o){var r=new o(t,e);n.push(r)})),n}}]),t}(),Gt=function(){function t(){zt(this,t)}return Ht(t,[{key:"create",value:function(e){var n="range"===e?"range":"simple";return new(0,t.list[n])}}]),t}();function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=ee(t);if(e){var r=ee(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Zt(this,n)}}function Zt(t,e){return!e||"object"!==It(e)&&"function"!=typeof e?te(t):e}function te(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ee(t){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Xt={simple:Yt,range:Ut},($t="list")in(Nt=Gt)?Object.defineProperty(Nt,$t,{value:Xt,enumerable:!0,configurable:!0,writable:!0}):Nt[$t]=Xt;var oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}(i,t);var e,n,o,r=Wt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),ne(te(e=r.call(this)),"root",void 0),ne(te(e),"type",void 0),ne(te(e),"components",void 0),ne(te(e),"componentList",void 0),e.root=t,e}return e=i,(n=[{key:"init",value:function(t){if(!t)throw new Error("options were not passed");this.components=[],this.type=t.range?"range":"simple";var e=(new Gt).create(this.type);this.components=e.createComponents(t,this.root),this.displaySlider(),this.createComponentList(),this.bindEvents()}},{key:"update",value:function(t){this.components.forEach((function(e){e&&e.update(t)}))}},{key:"displaySlider",value:function(){this.components.forEach((function(t){t&&t.display()}))}},{key:"bindEvents",value:function(){this.bindScaleEvents(),this.bindKnobsEvents(),this.bindLabelsEvents()}},{key:"createComponentList",value:function(){var t=this;this.componentList={},this.components.forEach((function(e){e&&(t.componentList[e.constructor.name]=e)}))}},{key:"bindScaleEvents",value:function(){var t=this;this.componentList.Scale&&(this.componentList.Scale.subscribe("scale:valueFrom",(function(e){return t.emit("valueFromChanged",e)})),this.componentList.Scale.subscribe("scale:valueTo",(function(e){return t.emit("valueToChanged",e)})),this.componentList.Scale.subscribe("scale:target",(function(e){t.componentList.Knob&&t.componentList.Knob.onPointerDown(e)})),this.componentList.Scale.subscribe("scale:targetMax",(function(e){t.componentList.SecondKnob&&t.componentList.SecondKnob.onPointerDown(e)})))}},{key:"bindKnobsEvents",value:function(){var t=this;this.componentList.Knob&&this.componentList.Knob.subscribe("changeValue",(function(e){return t.emit("valueFromChanged",e)})),"range"===this.type&&this.componentList.SecondKnob&&this.componentList.SecondKnob.subscribe("changeValue",(function(e){return t.emit("valueToChanged",e)}))}},{key:"bindLabelsEvents",value:function(){var t=this;this.componentList.Labels&&(this.componentList.Labels.subscribe("labels:valueFrom",(function(e){return t.emit("valueFromChanged",e)})),this.componentList.Labels.subscribe("labels:valueTo",(function(e){return t.emit("valueToChanged",e)})))}}])&&Jt(e.prototype,n),o&&Jt(e,o),i}(e);function re(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ae=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ie(this,"model",void 0),ie(this,"view",void 0),ie(this,"root",void 0),this.root=e,this.model=new _,this.view=new oe(e),this.init()}var e,n,o;return e=t,(n=[{key:"init",value:function(){this.view.init(this.model.state),this.view.update(this.model.state),this.bindModelEvents(),this.bindViewEvents()}},{key:"bindModelEvents",value:function(){var t=this;this.model.subscribe("stateChanged",(function(e){e instanceof Object&&(t.view.init(e),t.view.update(e)),t.customEvent()})),this.model.subscribe("valueChanged",(function(e){e instanceof Object&&t.view.update(e),t.customEvent()}))}},{key:"bindViewEvents",value:function(){var t=this;this.view.subscribe("valueFromChanged",(function(e){t.model.setValue("valueFrom",Number(e))})),this.view.subscribe("valueToChanged",(function(e){t.model.setValue("valueTo",Number(e))}))}},{key:"customEvent",value:function(){this.root.dispatchEvent(new CustomEvent("onChange",{detail:this.model.state}))}}])&&re(e.prototype,n),o&&re(e,o),t}();function ce(t){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ue={init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.each((function(){($(this).data().sliderPlugin=new ae(this),t)&&$(this).data("sliderPlugin").model.setState(t)}))},getState:function(){return $(this).data("sliderPlugin").model.getState()},setValue:function(t,e){$(this).data("sliderPlugin").model.setValue("".concat(t),e)},onChange:function(t){$(this).on("onChange",(function(e){return t(e)}))}};$.fn.sliderPlugin=function(t){if(ue[t]){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return ue[t].apply(this,n)}if("object"===ce(t)||!t){var r=t||{};return ue.init.call(this,r)}$.error("Метод с именем ".concat(t," не существует"))}}();